b<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">

		<title>reveal.js - The HTML Presentation Framework</title>

		<meta name="description" content="A framework for easily creating beautiful presentations using HTML">
		<meta name="author" content="Hakim El Hattab">

		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<link rel="stylesheet" href="css/reveal.min.css">
		<link rel="stylesheet" href="css/theme/default.css" id="theme">

		<!-- For syntax highlighting -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- If the query includes 'print-pdf', use the PDF print sheet -->
		<script>
			document.write( '<link rel="stylesheet" href="css/print/' + ( window.location.search.match( /print-pdf/gi ) ? 'pdf' : 'paper' ) + '.css" type="text/css" media="print">' );
		</script>

		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
	</head>

	<body>

		<div class="reveal">

			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">
				<section data-markdown>
					<script type="text/template">
						### Функциональное программирование на языке javascript
						```javascript
							console.log(function(){return 'hello!';}());
							// будет много кода :(
						```
					</script>
				</section>

				<section>
					<h3>история</h3>
					<p>
					<script>
						document.write((new Date(1995, 4, 4, 13, 13, 13)).toString());
					</script>
					</p>
					<p>Брендан Айк, Netscape.</p>
					<p>Может называть javascript javascript'ом, а не ECMAscript'ом</p>
				</section>

				<section>
					<h3>история</h3>
					<p>
					<script>
						document.write(new Date(1996, 1, 1).toString());
					</script>
					</p>
					<p>JScript, Microsoft</p>
					<p>javascript - Oracle</p>
				</section>

				<section>
					http://www.haskell.org/haskellwiki/The_JavaScript_Problem
					<h3>JavaScript sucks.</h3>
					<ul>
						<li>нет модульной системы</li>
						<li>слабая типизация</li>
						<li>многословный синтаксис функций</li>
						<li>позднее связывание IDE :(</li>
						<li>привередливое сравнение WAT?</li>
						<li>однопоточный</li>
						<li class="fragment">но функциональный</li>
					</ul>
				</section>
				<section>
					<h3>javascript - функциональный?</h3>
					убрать side-effects, т.е. следует избегать
					<ol>
						<li class="fragment">присваивания</li>
						<li class="fragment">циклы, вместо них - рекурсия</li>
						<li class="fragment">все объекты должны стать неизменяемыми</li>
						<li class="fragment">убрать функции, не являющиеся математическими</li>
					</ol>
				</section>

				<section>
					<section data-markdown>
						<script type="text/template">
							### Функция
							javascript
							``` javascript
							function fn(smth) {
								var magic = smth + 42;
								return magic;
							}

							var fn = function(smth) {
								var magic = smth + 42;
								return magic;
							}
							```
						</script>
					</section>
				</section>

				<section>
					<section data-markdown>
						<script type="text/template">
							### Функция
							coffeescript
							``` coffeescript
							fn = (smth) ->
								smth + 42
							```
						</script>
					</section>
				</section>

                <section>
                    <section data-markdown>
                        <script type="text/template">
                            ### замыкания
	                        лексическая область видимости
                            ``` javascript
	                        var fn = function() {
	                            var thing = 41;
	                            return function() {
	                                console.log(++thing);
	                            }
	                        }();
	                        fn();
	                        fn();
                            ```
                        </script>
                    </section>
                </section>

				<section>
					<section data-markdown>
						<h3>ФВП</h3>
						Массивы
						<ul>
							<li>forEach</li>
							<li>every</li>
							<li>some</li>
							<li>map</li>
							<li>filter</li>
							<li>reduce</li>
							<li>reduceRight</li>
							<li>indexOf</li>
							<li>lastIndexOf</li>
						</ul>
						не параллелятся
						<img style="position:absolute;right:0;top:0" src="img/ECMAScript.jpg">
					</section>
				</section>

				<section>
					<section data-markdown>
						<script type="text/template">
							###Пример
							Haskell
							``` haskell
							foldl1 (\a b->a + b) [1..5]
							```

							F#
							```fsharp
							List.reduce (fun a b -> a + b) [1..5]
							```

							Javascript
							``` javascript
							[1,2,3,4,5].reduce(function(a,b){return a + b;});
							[1,2,3,4,5].reduce(function(a,b) a + b); // ff only
							```

							Coffeescript
							``` coffeescript
							[1..5].reduce (a,b) -> a+b
							```

							Underscore
							``` javascript
							_.reduce(_.range(5), function(memo, num){ return memo + num; }, 0);
							```
						</script>
					</section>
				</section>

				<section>
					<section data-markdown>
						<script type="text/template">
							###каррированные функции
							####"классическое"
							Haskell
							``` haskell
							add = \a -> \b -> a + b
							add = \a b -> a + b
							add a b = a + b -- на уровне языка
							inc x = add 1 x
							inc = add 1
							inc 4 -- 5
							```
							Javascript
							``` javascript
							function add(x) {
							  return function(y) {
							    return x + y;
							  }
							}
							inc = add(1);
							inc(4); // 5
							add(4)(1);
							```
						</script>
					</section>
				</section>

				<section>
					<section data-markdown>
						<script type="text/template">
							###каррированные функции
							####Сахар
							Javascript
							``` javascript
							let add = (x) => (y) => {return x + y}; -- ECMAScript 6
							let add = (x) => (y) => x + y; -- firefox only
							inc = add(1);
							inc(4); // 5
							add(4)(1); // 5
							```
							Coffeescript
							``` coffeescript
							add = (x) -> (y) -> x + y
							inc = add 1
							inc 4 # 5
							add 4, 1 # 5
							```
							<img style="position:absolute;right:0;top:0" src="img/ECMAScript.jpg">
						</script>
					</section>
				</section>

				<section>
					<section data-markdown>
						<script type="text/template">
							###каррирование, общий случай
							Haskell
							``` haskell
							curry :: ((a, b) -> c) -> a -> b -> c
							curry f x y =  f (x, y)

							uncurry :: (a -> b -> c) -> ((a, b) -> c)
							uncurry f p =  f (fst p) (snd p)
							```
							Javascript
							``` javascript
							var curry = function(f) {
							  return function(a) {
							    return function(b) {
							      return f(a,b);
							    }
							  }
							}
							```
							А больше двух аргументов?
							<img style="position:absolute;right:0;top:0" src="img/ECMAScript.jpg">
						</script>
					</section>
				</section>

				<section>
					<section data-markdown>
						<script type="text/template">
							###каррирование, общий случай
							Livescript
							``` javascript
							function curry$(f, bound){
							  var context,
							  _curry = function(args) {
							    return f.length > 1 ? function(){
							      var params = args ? args.concat() : [];
							      context = bound ? context || this : this;
							      return params.push.apply(params, arguments) <
							          f.length && arguments.length ?
							        _curry.call(context, params) : f.apply(context, params);
							    } : f;
							  };
							  return _curry();
							}
							```
							<img style="position:absolute;right:0;top:0" src="img/ECMAScript.jpg">
						</script>
					</section>
				</section>

				<section>
					<section data-markdown>
						<script type="text/template">
							###каррирование, общий случай

							``` javascript
							var curry = function(fun) {
							  return function(a) { // возвращаем функцию от одного параметра
							    if (fun.length == 1) {
							      return fun.call(null, a);
							    } else {
							      return curry(fun.bind(null, a)); // рекурсия!
							    }
							  }
							};

							var sum4 = function(a, b, c, d) { return a + b + c + d;	};

                            var csum4 = curry(sum4);

							sum4(1,2,3,4); // 10
							csum4(1)(2)(3)(4); // 10
							```
							<img style="position:absolute;right:0;top:0" src="img/ECMAScript.jpg">
						</script>
					</section>
				</section>

				<section>
					<section data-markdown>
						<script type="text/template">
							###каррирование, общий случай

							- любая функция только от одного аргумента
							- нативный вариант с частичной применимостью лучше

							``` javascript
							console.log(csum4.length); // 1
							console.log(csum4(1).length); // 1
							console.log(csum4(1)(2).length); // 1
							console.log(csum4(1)(2)(3)(4).length); // undefined, это уже не функция

							csum3 = csum4(0);
							sum3 = sum4.bind(null, 0);
							```
							<img style="position:absolute;right:0;top:0" src="img/ECMAScript.jpg">
						</script>
					</section>
				</section>

				<section>
					<section data-markdown>
						<script type="text/template">
							###деструктивное присваивание
							Haskell
							``` haskell
							[a, b] = [1, 3] -- a == 1, b == 3
							[a, b] = [b, a] -- a == 3, b == 1
							```
							Javascript, ECMA-6
							``` coffeescript
							[a, b] = [1, 3] // a == 1, b == 3
							[a, b] = [b, a] // a == 3, b == 1
							```
							<img style="position:absolute;right:0;top:0" src="img/ECMAScript.jpg">
						</script>
					</section>
				</section>


			</div>

		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.min.js"></script>

		<script>

			// Full list of configuration options available here:
			// https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls: true,
				progress: true,
				history: true,
				center: true,

				theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
				transition: Reveal.getQueryHash().transition || 'default', // default/cube/page/concave/zoom/linear/fade/none

				// Optional libraries used to extend on reveal.js
				dependencies: [
					{ src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
					{ src: 'plugin/markdown/showdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
					{ src: 'plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
					{ src: 'plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }
					// { src: 'plugin/search/search.js', async: true, condition: function() { return !!document.body.classList; } }
					// { src: 'plugin/remotes/remotes.js', async: true, condition: function() { return !!document.body.classList; } }
				]
			});

		</script>

	</body>
</html>
